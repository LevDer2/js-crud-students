const getStudentsButton=document.querySelector("#get-students-btn"),table=document.querySelector(".students-tbody"),formRef=document.querySelector("#add-student-form");let editOrAdd=null;function getStudents(){return fetch("http://localhost:3000/students").then(t=>t.json())}function delStudentApi(t){return fetch(`http://localhost:3000/students/${t}`,{method:"DELETE"}).then(t=>t.json())}function addStudentApi(t){return fetch("http://localhost:3000/students/",{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(t=>t.json())}function editStudentApi(t,e){return fetch(`http://localhost:3000/students/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then(t=>t.json())}function renderStudents(t){table.innerHTML="";let e=t.map(({id:t,name:e,skills:n,isEnrolled:d,age:u,course:a,email:r})=>{let o=n&&"object"==typeof n?Object.values(n).join(", "):String(n??"");return`
        <tr id="${t}">
          <td>${t}</td>
          <td data-action="Name">${e}</td>
          <td data-action="Age">${u}</td>
          <td data-action="Course">${a}</td>
          <td data-action="Skills">${o}</td>
          <td data-action="Email">${r}</td>
          <td data-action="CheckBox">${d?"Онлайн":"Офлайн"}</td>
          <td>
            <button class="delete-students" data-action="Delete">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438} \u{441}\u{442}\u{443}\u{434}\u{435}\u{43D}\u{442}\u{430}</button>
            <button class="edit-students" data-action="Edit">\u{417}\u{43C}\u{456}\u{43D}\u{438}\u{442}\u{438} \u{434}\u{430}\u{43D}\u{456} \u{441}\u{442}\u{443}\u{434}\u{435}\u{43D}\u{442}\u{430}</button>
          </td>
        </tr>
      `}).join("");table.insertAdjacentHTML("beforeend",e)}function updateStudent(t){let e=document.getElementById(t),n=e.querySelector('[data-action="Name"]').textContent.trim(),d=e.querySelector('[data-action="Age"]').textContent.trim(),u=e.querySelector('[data-action="Course"]').textContent.trim(),a=e.querySelector('[data-action="Skills"]').textContent.trim(),r=e.querySelector('[data-action="Email"]').textContent.trim(),o=e.querySelector('[data-action="CheckBox"]').textContent.trim();formRef.elements.name.value=n,formRef.elements.age.value=d,formRef.elements.course.value=u,formRef.elements.skills.value=a,formRef.elements.email.value=r,formRef.elements.isEnrolled.checked="Онлайн"===o}function deleteStudent(t){return delStudentApi(t).then(()=>getStudents()).then(renderStudents)}getStudentsButton.addEventListener("click",()=>(getStudentsButton.style.display="none",getStudents().then(renderStudents))),table.addEventListener("click",t=>{if("Delete"===t.target.dataset.action)return deleteStudent(t.target.closest("tr").id);if("Edit"===t.target.dataset.action){let e=t.target.closest("tr").id;return editOrAdd=e,updateStudent(e)}}),formRef.addEventListener("submit",t=>{t.preventDefault();let{name:e,age:n,course:d,skills:u,email:a,isEnrolled:r}=t.target.elements,o={name:e.value.trim(),age:Number(n.value.trim()),course:d.value.trim(),skills:u.value.trim(),email:a.value.trim(),isEnrolled:r.checked};if(null===editOrAdd)return addStudentApi(o).then(()=>getStudents()).then(renderStudents).finally(()=>{t.target.reset()});let l=editOrAdd;return editStudentApi(l,{id:Number(l),...o}).then(()=>getStudents()).then(renderStudents).finally(()=>{editOrAdd=null,t.target.reset()})});
//# sourceMappingURL=js-crud-students.8ec978e0.js.map
