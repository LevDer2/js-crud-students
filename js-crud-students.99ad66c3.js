const getStudentsButton=document.querySelector("#get-students-btn"),table=document.querySelector(".students-tbody"),formRef=document.querySelector("#add-student-form");let editOrAdd=null;async function getStudents(){let t=await fetch("http://localhost:3000/students");return await t.json()}async function delStudentApi(t){let e=await fetch(`http://localhost:3000/students/${t}`,{method:"DELETE"});return await e.json()}async function addStudentApi(t){let e={method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}},n=await fetch("http://localhost:3000/students/",e);return await n.json()}async function editStudentApi(t,e){let n={method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}},a=await fetch(`http://localhost:3000/students/${t}`,n);return await a.json()}function renderStudents(t){table.innerHTML="";let e=t.map(({id:t,name:e,skills:n,isEnrolled:a,age:d,course:u,email:r})=>{let o=n&&"object"==typeof n?Object.values(n).join(", "):String(n??"");return`
        <tr id="${t}">
          <td>${t}</td>
          <td data-action="Name">${e}</td>
          <td data-action="Age">${d}</td>
          <td data-action="Course">${u}</td>
          <td data-action="Skills">${o}</td>
          <td data-action="Email">${r}</td>
          <td data-action="CheckBox">${a?"Онлайн":"Офлайн"}</td>
          <td>
            <button class="delete-students" data-action="Delete">\u{412}\u{438}\u{434}\u{430}\u{43B}\u{438}\u{442}\u{438} \u{441}\u{442}\u{443}\u{434}\u{435}\u{43D}\u{442}\u{430}</button>
            <button class="edit-students" data-action="Edit">\u{417}\u{43C}\u{456}\u{43D}\u{438}\u{442}\u{438} \u{434}\u{430}\u{43D}\u{456} \u{441}\u{442}\u{443}\u{434}\u{435}\u{43D}\u{442}\u{430}</button>
          </td>
        </tr>
      `}).join("");table.insertAdjacentHTML("beforeend",e)}async function handleStudentSubmit(t){t.preventDefault();let{name:e,age:n,course:a,skills:d,email:u,isEnrolled:r}=t.target.elements,o={name:e.value.trim(),age:Number(n.value.trim()),course:a.value.trim(),skills:d.value.trim(),email:u.value.trim(),isEnrolled:r.checked};try{if(null===editOrAdd)await addStudentApi(o);else{let t=editOrAdd;await editStudentApi(t,{id:Number(t),...o}),editOrAdd=null}let t=await getStudents();renderStudents(t)}catch(t){console.error("Submit error:",t)}finally{t.target.reset()}}function updateStudent(t){let e=document.getElementById(t),n=e.querySelector('[data-action="Name"]').textContent.trim(),a=e.querySelector('[data-action="Age"]').textContent.trim(),d=e.querySelector('[data-action="Course"]').textContent.trim(),u=e.querySelector('[data-action="Skills"]').textContent.trim(),r=e.querySelector('[data-action="Email"]').textContent.trim(),o=e.querySelector('[data-action="CheckBox"]').textContent.trim();formRef.elements.name.value=n,formRef.elements.age.value=a,formRef.elements.course.value=d,formRef.elements.skills.value=u,formRef.elements.email.value=r,formRef.elements.isEnrolled.checked="Онлайн"===o}async function deleteStudent(t){try{await delStudentApi(t);let e=await getStudents();return renderStudents(e)}catch(t){console.log(t)}}getStudentsButton.addEventListener("click",async()=>{getStudentsButton.style.display="none";let t=await getStudents();await renderStudents(t)}),table.addEventListener("click",t=>{if("Delete"===t.target.dataset.action)return deleteStudent(t.target.closest("tr").id);if("Edit"===t.target.dataset.action){let e=t.target.closest("tr").id;return editOrAdd=e,updateStudent(e)}}),formRef.addEventListener("submit",handleStudentSubmit);
//# sourceMappingURL=js-crud-students.99ad66c3.js.map
