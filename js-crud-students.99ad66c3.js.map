{"mappings":"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","sources":["<anon>","src/index.js"],"sourcesContent":["// // ! Elements!\n// const getStudentsButton = document.querySelector(\"#get-students-btn\");\n// const table = document.querySelector(\".students-tbody\");\n// const formRef = document.querySelector(\"#add-student-form\");\n// // ! If here we have null we will add new student if underfined we will edit our student\n// let editOrAdd = null;\n// //! API Get STudents Функція для отримання всіх студентів\n// function getStudents() {\n//   return fetch(`http://localhost:3000/students`).then((res) => res.json());\n// }\n// // ! API Delete student\n// function delStudentApi(id) {\n//   return fetch(`http://localhost:3000/students/${id}`, {\n//     method: \"DELETE\",\n//   }).then((res) => res.json());\n// }\n// // ! API Add New student\n// function addStudentApi(student) {\n//   const options = {\n//     method: \"POST\",\n//     body: JSON.stringify(student),\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//   };\n//   return fetch(`http://localhost:3000/students/`, options).then((res) =>\n//     res.json()\n//   );\n// }\n// // ! API Edit Student\n// function editStudentApi(id, student) {\n//   const options = {\n//     method: \"PUT\",\n//     body: JSON.stringify(student),\n//     headers: {\n//       \"Content-Type\": \"application/json\",\n//     },\n//   };\n//   return fetch(`http://localhost:3000/students/${id}`, options).then((res) =>\n//     res.json()\n//   );\n// }\n// // ! For checking our students\n// // getStudents().then((res) => console.log(res));\n// // ! If we click to this button we will get our students\n// getStudentsButton.addEventListener(\"click\", () => {\n//   // getStudentsButton.textContent = \"Оновити список студентів\";\n//   getStudentsButton.style.display = \"none\";\n//   return getStudents().then(renderStudents);\n// });\n// // ! Render function\n// function renderStudents(students) {\n//   table.innerHTML = \"\";\n//   const rows = students\n//     .map(({ id, name, skills, isEnrolled, age, course, email }) => {\n//       const skillsList = Object.values(skills).join(\"\");\n//       return `\n//         <tr id=\"${id}\">\n//           <td>${id}</td>\n//           <td data-action=\"Name\">${name}</td>\n//           <td data-action=\"Age\">${age}</td>\n//           <td data-action=\"Course\">${course}</td>\n//           <td data-action=\"Skills\">${skillsList}</td>\n//           <td data-action=\"Email\">${email}</td>\n//           <td data-action=\"CheckBox\">${isEnrolled ? \"Онлайн\" : \"Офлайн\"}</td>\n//           <td><button class=\"delete-students\" data-action=\"Delete\">Видалити студента</button>\\\n//           <button class=\"edit-students\" data-action=\"Edit\">Змінити дані студента</button></td>\n//         </tr>\n//       `;\n//     })\n//     .join(\"\");\n//   table.insertAdjacentHTML(\"beforeend\", rows);\n// }\n// // ! If we click to this button we will delete one of our students\n// table.addEventListener(\"click\", (event) => {\n//   // const deleteButton = event.target.closest(\"button.delete-students\");\n//   if (event.target.dataset.action === \"Delete\") {\n//     const itemId = event.target.closest(\"tr\").id;\n//     return deleteStudent(itemId);\n//   } else if (event.target.dataset.action === \"Edit\") {\n//     const itemId = event.target.closest(\"tr\").id; // <- важливо .id\n//     editOrAdd = itemId; // краще зберігати тут id (а не undefined)\n//     return updateStudent(itemId);\n//   }\n// });\n// // ! Submit form to add new student or edit student\n// formRef.addEventListener(\"submit\", (event) => {\n//   event.preventDefault();\n//   const { name, age, course, skills, email, isEnrolled } =\n//     event.target.elements;\n//   // console.log(name.value);\n//   // console.log(age.value);\n//   // console.log(course.value);\n//   // console.log(skills.value);\n//   // console.log(email.value);\n//   // console.log(isEnrolled.checked);\n//   const data = {\n//     name: name.value.trim(),\n//     age: Number(age.value.trim()),\n//     course: course.value.trim(),\n//     skills: skills.value.trim(),\n//     email: email.value.trim(),\n//     isEnrolled: isEnrolled.checked,\n//   };\n//   // ! Add student\n//   if (editOrAdd === null) {\n//     addStudentApi(data)\n//       .then(() => getStudents())\n//       .then(renderStudents);\n//   }\n//   // ! Edit student\n//   else if (editOrAdd === undefined) {\n//      editStudentApi(editId, { id: Number(editId), ...data })\n//     .then(() => getStudents())\n//     .then(renderStudents)\n//     .finally(() => {\n//       editId = null;\n//       event.target.reset();\n//     });\n//   }\n//   // event.target.reset();\n// });\n// // Функція для додавання нового студента\n// function addStudent(e) {\n//   // твій код\n// }\n// // Функція для оновлення студента\n// function updateStudent(id) {\n//   const tr = document.getElementById(id);\n//   if (!tr) return;\n//   const name = tr.querySelector('[data-action=\"Name\"]').textContent.trim();\n//   const age = tr.querySelector('[data-action=\"Age\"]').textContent.trim();\n//   const course = tr.querySelector('[data-action=\"Course\"]').textContent.trim();\n//   const skills = tr.querySelector('[data-action=\"Skills\"]').textContent.trim();\n//   const email = tr.querySelector('[data-action=\"Email\"]').textContent.trim();\n//   const status = tr.querySelector('[data-action=\"CheckBox\"]').textContent.trim();\n//   formRef.elements.name.value = name;\n//   formRef.elements.age.value = age;\n//   formRef.elements.course.value = course;\n//   formRef.elements.skills.value = skills;\n//   formRef.elements.email.value = email;\n//   formRef.elements.isEnrolled.checked = status === \"Онлайн\";\n// }\n// // Функція для видалення студента\n// function deleteStudent(id) {\n//   console.log(id);\n//   delStudentApi(id)\n//     .then(() => getStudents())\n//     .then(renderStudents);\n// }\n// // TODO Clean code in // and make edit function\n// ! Elements!\nconst getStudentsButton = document.querySelector(\"#get-students-btn\");\nconst table = document.querySelector(\".students-tbody\");\nconst formRef = document.querySelector(\"#add-student-form\");\nlet editOrAdd = null;\n//! API Get Students\nasync function getStudents() {\n    // return fetch(`http://localhost:3000/students`).then((res) => res.json());\n    const res = await fetch(`http://localhost:3000/students`);\n    return await res.json();\n}\n// ! API Delete student\nasync function delStudentApi(id) {\n    // return fetch(`http://localhost:3000/students/${id}`, {\n    //   method: \"DELETE\",\n    // }).then((res) => res.json());\n    const res = await fetch(`http://localhost:3000/students/${id}`, {\n        method: \"DELETE\"\n    });\n    return await res.json();\n}\n// ! API Add New student\nasync function addStudentApi(student) {\n    const options = {\n        method: \"POST\",\n        body: JSON.stringify(student),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    const res = await fetch(`http://localhost:3000/students/`, options);\n    return await res.json();\n}\n// ! API Edit Student\nasync function editStudentApi(id, student) {\n    const options = {\n        method: \"PUT\",\n        body: JSON.stringify(student),\n        headers: {\n            \"Content-Type\": \"application/json\"\n        }\n    };\n    const res = await fetch(`http://localhost:3000/students/${id}`, options);\n    return await res.json();\n}\n// ! If we click to this button we will get our students\ngetStudentsButton.addEventListener(\"click\", async ()=>{\n    getStudentsButton.style.display = \"none\";\n    const res = await getStudents();\n    await renderStudents(res);\n});\n// ! Render function\nfunction renderStudents(students) {\n    table.innerHTML = \"\";\n    const rows = students.map(({ id, name, skills, isEnrolled, age, course, email })=>{\n        const skillsList = skills && typeof skills === \"object\" ? Object.values(skills).join(\", \") : String(skills ?? \"\");\n        return `\n        <tr id=\"${id}\">\n          <td>${id}</td>\n          <td data-action=\"Name\">${name}</td>\n          <td data-action=\"Age\">${age}</td>\n          <td data-action=\"Course\">${course}</td>\n          <td data-action=\"Skills\">${skillsList}</td>\n          <td data-action=\"Email\">${email}</td>\n          <td data-action=\"CheckBox\">${isEnrolled ? \"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D\" : \"\\u041E\\u0444\\u043B\\u0430\\u0439\\u043D\"}</td>\n          <td>\n            <button class=\"delete-students\" data-action=\"Delete\">\\u{412}\\u{438}\\u{434}\\u{430}\\u{43B}\\u{438}\\u{442}\\u{438} \\u{441}\\u{442}\\u{443}\\u{434}\\u{435}\\u{43D}\\u{442}\\u{430}</button>\n            <button class=\"edit-students\" data-action=\"Edit\">\\u{417}\\u{43C}\\u{456}\\u{43D}\\u{438}\\u{442}\\u{438} \\u{434}\\u{430}\\u{43D}\\u{456} \\u{441}\\u{442}\\u{443}\\u{434}\\u{435}\\u{43D}\\u{442}\\u{430}</button>\n          </td>\n        </tr>\n      `;\n    }).join(\"\");\n    table.insertAdjacentHTML(\"beforeend\", rows);\n}\n// ! If we click to this button we will delete one of our students OR edit\ntable.addEventListener(\"click\", (event)=>{\n    if (event.target.dataset.action === \"Delete\") {\n        const itemId = event.target.closest(\"tr\").id;\n        return deleteStudent(itemId);\n    } else if (event.target.dataset.action === \"Edit\") {\n        const itemId = event.target.closest(\"tr\").id;\n        editOrAdd = itemId;\n        return updateStudent(itemId);\n    }\n});\n// ! Submit form to add new student or edit student\nasync function handleStudentSubmit(event) {\n    event.preventDefault();\n    const { name, age, course, skills, email, isEnrolled } = event.target.elements;\n    const data = {\n        name: name.value.trim(),\n        age: Number(age.value.trim()),\n        course: course.value.trim(),\n        skills: skills.value.trim(),\n        email: email.value.trim(),\n        isEnrolled: isEnrolled.checked\n    };\n    try {\n        // Add student\n        if (editOrAdd === null) await addStudentApi(data);\n        else {\n            // Edit student\n            const id = editOrAdd;\n            await editStudentApi(id, {\n                id: Number(id),\n                ...data\n            });\n            editOrAdd = null;\n        }\n        const students = await getStudents();\n        renderStudents(students);\n    } catch (error) {\n        console.error(\"Submit error:\", error);\n    // тут можеш показати повідомлення в UI, напр. toast/alert\n    // alert(\"Сталася помилка. Спробуй ще раз.\");\n    } finally{\n        event.target.reset();\n    }\n}\nformRef.addEventListener(\"submit\", handleStudentSubmit);\nfunction updateStudent(id) {\n    const tr = document.getElementById(id);\n    const nameText = tr.querySelector('[data-action=\"Name\"]').textContent.trim();\n    const ageText = tr.querySelector('[data-action=\"Age\"]').textContent.trim();\n    const courseText = tr.querySelector('[data-action=\"Course\"]').textContent.trim();\n    const skillsText = tr.querySelector('[data-action=\"Skills\"]').textContent.trim();\n    const emailText = tr.querySelector('[data-action=\"Email\"]').textContent.trim();\n    const statusText = tr.querySelector('[data-action=\"CheckBox\"]').textContent.trim();\n    formRef.elements.name.value = nameText;\n    formRef.elements.age.value = ageText;\n    formRef.elements.course.value = courseText;\n    formRef.elements.skills.value = skillsText;\n    formRef.elements.email.value = emailText;\n    formRef.elements.isEnrolled.checked = statusText === \"\\u041E\\u043D\\u043B\\u0430\\u0439\\u043D\";\n}\nasync function deleteStudent(id) {\n    try {\n        await delStudentApi(id);\n        const students = await getStudents();\n        return renderStudents(students);\n    } catch (error) {\n        console.log(error);\n    }\n}\n\n//# sourceMappingURL=js-crud-students.99ad66c3.js.map\n","// // ! Elements!\r\n// const getStudentsButton = document.querySelector(\"#get-students-btn\");\r\n// const table = document.querySelector(\".students-tbody\");\r\n// const formRef = document.querySelector(\"#add-student-form\");\r\n\r\n// // ! If here we have null we will add new student if underfined we will edit our student\r\n// let editOrAdd = null;\r\n\r\n// //! API Get STudents Функція для отримання всіх студентів\r\n// function getStudents() {\r\n//   return fetch(`http://localhost:3000/students`).then((res) => res.json());\r\n// }\r\n\r\n// // ! API Delete student\r\n// function delStudentApi(id) {\r\n//   return fetch(`http://localhost:3000/students/${id}`, {\r\n//     method: \"DELETE\",\r\n//   }).then((res) => res.json());\r\n// }\r\n\r\n// // ! API Add New student\r\n// function addStudentApi(student) {\r\n//   const options = {\r\n//     method: \"POST\",\r\n//     body: JSON.stringify(student),\r\n//     headers: {\r\n//       \"Content-Type\": \"application/json\",\r\n//     },\r\n//   };\r\n\r\n//   return fetch(`http://localhost:3000/students/`, options).then((res) =>\r\n//     res.json()\r\n//   );\r\n// }\r\n\r\n// // ! API Edit Student\r\n// function editStudentApi(id, student) {\r\n//   const options = {\r\n//     method: \"PUT\",\r\n//     body: JSON.stringify(student),\r\n//     headers: {\r\n//       \"Content-Type\": \"application/json\",\r\n//     },\r\n//   };\r\n\r\n//   return fetch(`http://localhost:3000/students/${id}`, options).then((res) =>\r\n//     res.json()\r\n//   );\r\n// }\r\n\r\n// // ! For checking our students\r\n// // getStudents().then((res) => console.log(res));\r\n\r\n// // ! If we click to this button we will get our students\r\n// getStudentsButton.addEventListener(\"click\", () => {\r\n//   // getStudentsButton.textContent = \"Оновити список студентів\";\r\n//   getStudentsButton.style.display = \"none\";\r\n//   return getStudents().then(renderStudents);\r\n// });\r\n\r\n// // ! Render function\r\n// function renderStudents(students) {\r\n//   table.innerHTML = \"\";\r\n//   const rows = students\r\n//     .map(({ id, name, skills, isEnrolled, age, course, email }) => {\r\n//       const skillsList = Object.values(skills).join(\"\");\r\n//       return `\r\n//         <tr id=\"${id}\">\r\n//           <td>${id}</td>\r\n//           <td data-action=\"Name\">${name}</td>\r\n//           <td data-action=\"Age\">${age}</td>\r\n//           <td data-action=\"Course\">${course}</td>\r\n//           <td data-action=\"Skills\">${skillsList}</td>\r\n//           <td data-action=\"Email\">${email}</td>\r\n//           <td data-action=\"CheckBox\">${isEnrolled ? \"Онлайн\" : \"Офлайн\"}</td>\r\n//           <td><button class=\"delete-students\" data-action=\"Delete\">Видалити студента</button>\\\r\n//           <button class=\"edit-students\" data-action=\"Edit\">Змінити дані студента</button></td>\r\n//         </tr>\r\n//       `;\r\n//     })\r\n//     .join(\"\");\r\n//   table.insertAdjacentHTML(\"beforeend\", rows);\r\n// }\r\n\r\n// // ! If we click to this button we will delete one of our students\r\n// table.addEventListener(\"click\", (event) => {\r\n//   // const deleteButton = event.target.closest(\"button.delete-students\");\r\n//   if (event.target.dataset.action === \"Delete\") {\r\n//     const itemId = event.target.closest(\"tr\").id;\r\n//     return deleteStudent(itemId);\r\n//   } else if (event.target.dataset.action === \"Edit\") {\r\n//     const itemId = event.target.closest(\"tr\").id; // <- важливо .id\r\n//     editOrAdd = itemId; // краще зберігати тут id (а не undefined)\r\n//     return updateStudent(itemId);\r\n//   }\r\n// });\r\n\r\n// // ! Submit form to add new student or edit student\r\n// formRef.addEventListener(\"submit\", (event) => {\r\n//   event.preventDefault();\r\n//   const { name, age, course, skills, email, isEnrolled } =\r\n//     event.target.elements;\r\n//   // console.log(name.value);\r\n//   // console.log(age.value);\r\n//   // console.log(course.value);\r\n//   // console.log(skills.value);\r\n//   // console.log(email.value);\r\n//   // console.log(isEnrolled.checked);\r\n//   const data = {\r\n//     name: name.value.trim(),\r\n//     age: Number(age.value.trim()),\r\n//     course: course.value.trim(),\r\n//     skills: skills.value.trim(),\r\n//     email: email.value.trim(),\r\n//     isEnrolled: isEnrolled.checked,\r\n//   };\r\n//   // ! Add student\r\n//   if (editOrAdd === null) {\r\n//     addStudentApi(data)\r\n//       .then(() => getStudents())\r\n//       .then(renderStudents);\r\n//   }\r\n//   // ! Edit student\r\n//   else if (editOrAdd === undefined) {\r\n//      editStudentApi(editId, { id: Number(editId), ...data })\r\n//     .then(() => getStudents())\r\n//     .then(renderStudents)\r\n//     .finally(() => {\r\n//       editId = null;\r\n//       event.target.reset();\r\n//     });\r\n//   }\r\n//   // event.target.reset();\r\n// });\r\n\r\n// // Функція для додавання нового студента\r\n// function addStudent(e) {\r\n//   // твій код\r\n// }\r\n\r\n// // Функція для оновлення студента\r\n// function updateStudent(id) {\r\n//   const tr = document.getElementById(id);\r\n//   if (!tr) return;\r\n\r\n//   const name = tr.querySelector('[data-action=\"Name\"]').textContent.trim();\r\n//   const age = tr.querySelector('[data-action=\"Age\"]').textContent.trim();\r\n//   const course = tr.querySelector('[data-action=\"Course\"]').textContent.trim();\r\n//   const skills = tr.querySelector('[data-action=\"Skills\"]').textContent.trim();\r\n//   const email = tr.querySelector('[data-action=\"Email\"]').textContent.trim();\r\n//   const status = tr.querySelector('[data-action=\"CheckBox\"]').textContent.trim();\r\n\r\n//   formRef.elements.name.value = name;\r\n//   formRef.elements.age.value = age;\r\n//   formRef.elements.course.value = course;\r\n//   formRef.elements.skills.value = skills;\r\n//   formRef.elements.email.value = email;\r\n//   formRef.elements.isEnrolled.checked = status === \"Онлайн\";\r\n// }\r\n\r\n// // Функція для видалення студента\r\n// function deleteStudent(id) {\r\n//   console.log(id);\r\n//   delStudentApi(id)\r\n//     .then(() => getStudents())\r\n//     .then(renderStudents);\r\n// }\r\n\r\n// // TODO Clean code in // and make edit function\r\n\r\n// ! Elements!\r\nconst getStudentsButton = document.querySelector(\"#get-students-btn\");\r\nconst table = document.querySelector(\".students-tbody\");\r\nconst formRef = document.querySelector(\"#add-student-form\");\r\n\r\nlet editOrAdd = null;\r\n\r\n//! API Get Students\r\nasync function getStudents() {\r\n  // return fetch(`http://localhost:3000/students`).then((res) => res.json());\r\n  const res = await fetch(`http://localhost:3000/students`);\r\n  return await res.json();\r\n}\r\n\r\n// ! API Delete student\r\nasync function delStudentApi(id) {\r\n  // return fetch(`http://localhost:3000/students/${id}`, {\r\n  //   method: \"DELETE\",\r\n  // }).then((res) => res.json());\r\n  const res = await fetch(`http://localhost:3000/students/${id}`, {\r\n    method: \"DELETE\",\r\n  })\r\n  return await res.json();\r\n}\r\n\r\n// ! API Add New student\r\nasync function addStudentApi(student) {\r\n  const options = {\r\n    method: \"POST\",\r\n    body: JSON.stringify(student),\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const res = await fetch(`http://localhost:3000/students/`, options)\r\n  return await res.json()\r\n}\r\n\r\n// ! API Edit Student\r\nasync function editStudentApi(id, student) {\r\n  const options = {\r\n    method: \"PUT\",\r\n    body: JSON.stringify(student),\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n  };\r\n\r\n  const res = await fetch(`http://localhost:3000/students/${id}`, options)\r\n  return await res.json()\r\n}\r\n\r\n// ! If we click to this button we will get our students\r\ngetStudentsButton.addEventListener(\"click\", async () => {\r\n  getStudentsButton.style.display = \"none\";\r\n  const res = await getStudents()\r\n  await (renderStudents(res));\r\n});\r\n\r\n// ! Render function\r\nfunction renderStudents(students) {\r\n  table.innerHTML = \"\";\r\n  const rows = students\r\n    .map(({ id, name, skills, isEnrolled, age, course, email }) => {\r\n      const skillsList =\r\n        skills && typeof skills === \"object\"\r\n          ? Object.values(skills).join(\", \")\r\n          : String(skills ?? \"\");\r\n\r\n      return `\r\n        <tr id=\"${id}\">\r\n          <td>${id}</td>\r\n          <td data-action=\"Name\">${name}</td>\r\n          <td data-action=\"Age\">${age}</td>\r\n          <td data-action=\"Course\">${course}</td>\r\n          <td data-action=\"Skills\">${skillsList}</td>\r\n          <td data-action=\"Email\">${email}</td>\r\n          <td data-action=\"CheckBox\">${isEnrolled ? \"Онлайн\" : \"Офлайн\"}</td>\r\n          <td>\r\n            <button class=\"delete-students\" data-action=\"Delete\">Видалити студента</button>\r\n            <button class=\"edit-students\" data-action=\"Edit\">Змінити дані студента</button>\r\n          </td>\r\n        </tr>\r\n      `;\r\n    })\r\n    .join(\"\");\r\n\r\n  table.insertAdjacentHTML(\"beforeend\", rows);\r\n}\r\n\r\n// ! If we click to this button we will delete one of our students OR edit\r\ntable.addEventListener(\"click\", (event) => {\r\n  if (event.target.dataset.action === \"Delete\") {\r\n    const itemId = event.target.closest(\"tr\").id;\r\n    return deleteStudent(itemId);\r\n  } else if (event.target.dataset.action === \"Edit\") {\r\n    const itemId = event.target.closest(\"tr\").id;\r\n    editOrAdd = itemId;\r\n    return updateStudent(itemId);\r\n  }\r\n});\r\n\r\n// ! Submit form to add new student or edit student\r\nasync function handleStudentSubmit(event) {\r\n  event.preventDefault();\r\n\r\n  const { name, age, course, skills, email, isEnrolled } = event.target.elements;\r\n\r\n  const data = {\r\n    name: name.value.trim(),\r\n    age: Number(age.value.trim()),\r\n    course: course.value.trim(),\r\n    skills: skills.value.trim(),\r\n    email: email.value.trim(),\r\n    isEnrolled: isEnrolled.checked,\r\n  };\r\n\r\n  try {\r\n    // Add student\r\n    if (editOrAdd === null) {\r\n      await addStudentApi(data);\r\n    } else {\r\n      // Edit student\r\n      const id = editOrAdd;\r\n      await editStudentApi(id, { id: Number(id), ...data });\r\n      editOrAdd = null;\r\n    }\r\n\r\n    const students = await getStudents();\r\n    renderStudents(students);\r\n  } catch (error) {\r\n    console.error(\"Submit error:\", error);\r\n    // тут можеш показати повідомлення в UI, напр. toast/alert\r\n    // alert(\"Сталася помилка. Спробуй ще раз.\");\r\n  } finally {\r\n    event.target.reset();\r\n  }\r\n}\r\n\r\nformRef.addEventListener(\"submit\", handleStudentSubmit);\r\n\r\n\r\nfunction updateStudent(id) {\r\n  const tr = document.getElementById(id);\r\n\r\n  const nameText = tr.querySelector('[data-action=\"Name\"]').textContent.trim();\r\n  const ageText = tr.querySelector('[data-action=\"Age\"]').textContent.trim();\r\n  const courseText = tr\r\n    .querySelector('[data-action=\"Course\"]')\r\n    .textContent.trim();\r\n  const skillsText = tr\r\n    .querySelector('[data-action=\"Skills\"]')\r\n    .textContent.trim();\r\n  const emailText = tr\r\n    .querySelector('[data-action=\"Email\"]')\r\n    .textContent.trim();\r\n  const statusText = tr\r\n    .querySelector('[data-action=\"CheckBox\"]')\r\n    .textContent.trim();\r\n\r\n  formRef.elements.name.value = nameText;\r\n  formRef.elements.age.value = ageText;\r\n  formRef.elements.course.value = courseText;\r\n  formRef.elements.skills.value = skillsText;\r\n  formRef.elements.email.value = emailText;\r\n  formRef.elements.isEnrolled.checked = statusText === \"Онлайн\";\r\n}\r\n\r\nasync function deleteStudent(id) {\r\n  try {\r\n    await delStudentApi(id);\r\n    const students = await getStudents();\r\n    return renderStudents(students);\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n"],"names":["getStudentsButton","document","querySelector","table","formRef","editOrAdd","getStudents","res","fetch","json","delStudentApi","id","method","addStudentApi","student","options","body","JSON","stringify","headers","editStudentApi","renderStudents","students","innerHTML","rows","map","name","skills","isEnrolled","age","course","email","skillsList","Object","values","join","String","insertAdjacentHTML","handleStudentSubmit","event","preventDefault","target","elements","data","value","trim","Number","checked","error","console","reset","updateStudent","tr","getElementById","nameText","textContent","ageText","courseText","skillsText","emailText","statusText","deleteStudent","log","addEventListener","style","display","dataset","action","closest","itemId"],"version":3,"file":"js-crud-students.99ad66c3.js.map"}